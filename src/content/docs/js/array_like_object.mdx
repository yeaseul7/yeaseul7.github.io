---
layout: ../../../layouts/BlogPost.astro
title: 유사 배열 객체
---

import { Image } from "astro:assets";

### 유사 배열 객체

배열처럼 인덱스로 프로퍼티 값에 접근할 수 있고 length 프로퍼티를 갖는 객체

ex)Array, String, DOM 컬렉션(NodeList, HTMLCollection), arguments, 문자열

> 순수 유사 배열 객체는 이터러블이 아닌 일반객체이다. (Symbol.iterator가 없기 때문)
```javascript
// 유사 배열 객체
const likeArray = {
0: 1,
1: 2,
2: 3,
length: 3
};

// 유사배열을 배열로 바꿔주는 Array의 from이라는 static 메소드
const arr = Array.from(likeArray);

//⚠️ iterable이 아닌 likeArray는 스프레드 문법을 사용할 수 없다. 
const arr2 = [...likeArray]; // TypeError: likeArray is not iterable
```

for Loop는 인덱스 번호로 다음 데이터가 존재하는지 확인하기 떄문에  
length와 인덱스만 있으면 사용가능하다.  
하지만 for...of는 인덱스 번호를 사용하지 않고 이터레이터를 이용한다.  
(next 메서드를 호출한다. 따라서 Symbol.iterator가 존재해야함)

### 유사배열객체를 Array.from으로 바꿀 때 생길 수 있는 문제 

1. Shallow Copy

```javascript
const likeArray = {
  0: { name: 'Kancho', type: 'Dog' },
  length: 1
};

const newArr = Array.from(likeArray);

newArr[0].name = 'Super Kancho';

console.log(likeArray[0].name); // "Super Kancho" (OMG...)
```
> 해결 방법: structuredClone 사용
```javascript
const likeArray = {
  0: { name: 'Kancho', type: 'Dog' },
  length: 1
};

const newArr = structuredClone(Array.from(likeArray));

newArr[0].name = 'Super Kancho';

console.log(likeArray[0].name); // "Super Kancho" (OMG...)
```

2. 인덱스와 length가 아닌 프로퍼티가 없어짐 
3. 존재하지 않는 인덱스에 undefined

