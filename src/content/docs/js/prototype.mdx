---
layout: ../../../layouts/BlogPost.astro
title: Prototype
---

import { Image } from "astro:assets";
import constructorPrototypeImg from "../../../assets/images/prototype/contructorprototype.png";
import abnormalChainImg from "../../../assets/images/prototype/abnormal_prototype_chain.png";
import prototypeChainImg from "../../../assets/images/prototype/prortype_chain.png";

### Prototype ê¸°ë°˜ OOP

> JavascriptëŠ” Prototypeìœ¼ë¡œ OOP íŠ¹ì„±ì¸ ìƒì†ì„±ì„ ë³´ì—¬ì¤€ë‹¤.

ìƒì„±ì í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ OOP íŠ¹ì„±ì¸ ìƒì†ì„±ì„ êµ¬í˜„í•˜ë©´ í•¨ìˆ˜ ê°™ì€ ê²½ìš° ì¸ìŠ¤í„´ìŠ¤ë§ˆë‹¤ ì†ì„±ì´ ì¤‘ë³µìœ¼ë¡œ ìƒê¸°ê¸° ë•Œë¬¸ì— ë©”ëª¨ë¦¬ ì¸¡ë©´ì—ì„œ ë¹„íš¨ìœ¨ì ì¼ ìˆ˜ ìˆë‹¤.
ì´ë•Œ prototypeìœ¼ë¡œ í•œê³³ì— í•¨ìˆ˜ë¥¼ ì €ì¥í•˜ê³  prototype ì ‘ê·¼ì„ í†µí•´ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```javascript
// ìƒì„±ì í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°
function Circle(radius) {
  this.radius = radius;
  this.getArea = function () {
    return Math.PI * this.radius ** 2;
  };
}

const circle1 = new Circle(1);
const circle2 = new Circle(2);

//getAreaê°€ ì¤‘ë³µìœ¼ë¡œ ìƒì„±ë¨ ğŸ¥²

// Prototypeì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°

function Circle(radius) {
  this.radius = radius;
}

Circle.prototype.getArea = function () {
  return Math.PI * this.radius ** 2;
};

const circle1 = new Circle(1);
const circle2 = new Circle(2);

//Circle.prototypeìœ¼ë¡œë¶€í„° getAreaë¥¼ ìƒì†ë°›ëŠ”ë‹¤.
```

ëª¨ë“  ê°ì²´ëŠ” [[Prototype]]ì´ ì¡´ì¬í•˜ê³  ê·¸ ê°’ì€ nullì¼ ìˆ˜ ìˆë‹¤.
ê°ì²´ ìƒì„± ë°©ì‹ì— ë”°ë¼ ì–´ë–¤ ê°’ì´ ë“¤ì–´ê°ˆì§€ ì •í•´ì§„ë‹¤.
ë˜í•œ ê·¸ ê°’ì€ `__proto__`ë¡œ ê°„ì ‘ ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹¤.

### [[Prototype]] & prototype

**`[[Prototype]]`**

- ëª¨ë“  ê°ì²´
- `__proto__` ì ‘ê·¼ìë‚˜ `Object.getPrototypeOf()`ë¡œ ì ‘ê·¼ ê°€ëŠ¥
- ìƒìœ„ì— ìˆëŠ” í”„ë¡œí† íƒ€ì… ê°ì²´
- í•¨ìˆ˜ì˜ ê²½ìš° -> `Function.prototype`
- ì¸ìŠ¤í„´ìŠ¤ì˜ ê²½ìš° -> ìƒì„±ì í•¨ìˆ˜ì˜ `prototype` ê°ì²´

**`prototype` í”„ë¡œí¼í‹°**

- í•¨ìˆ˜ ê°ì²´ë§Œ ê°€ì§€ê³  ìˆëŠ” ì¼ë°˜ í”„ë¡œí¼í‹°
- ì¸ìŠ¤í„´ìŠ¤ì˜ `[[Prototype]]`ì´ ê°€ë¦¬í‚¬ ê°ì²´ `ex) Dog.prototype`
  > âš ï¸ í™”ì‚´í‘œ í•¨ìˆ˜ëŠ” non-constructorì´ê¸° ë•Œë¬¸ì— prototype í”„ë¡œí¼í‹°ê°€ ì—†ë‹¤.

```javascript
function Dog(name) {
  this.name = "early";
}

const puppy = new Dog("access");

console.log(Dog.prototype); // DogëŠ” í•¨ìˆ˜ì´ë¯€ë¡œ prototype í”„ë¡œí¼í‹° ì¡´ì¬
console.log(puppy.prototype); // undefined

console.log(puppy.__proto__ === Dog.prototype); // true
console.log(Dog.__proto__); // Function.prototype
console.log(puppy.__proto__); // Dog.prototype
```

### `__proto__`

> `__proto__`ëŠ” ì ‘ê·¼ì í”„ë¡œí¼í‹°ì´ë‹¤.

`__proto__`ëŠ” getter/setterë¥¼ í†µí•´ [[Prototype]]ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

```javascript
const obj = {};
const parent = { x: 1 };
// getter í•¨ìˆ˜ì¸ get __proto__ê°€ í˜¸ì¶œë˜ì–´ obj ê°ì²´ì˜ í”„ë¡œí† íƒ€ì…ì„ ì·¨ë“
obj.__proto__;
```

```javascript
const obj = {};
const parent = { x: 1 };
// setter í•¨ìˆ˜ì¸ set __proto__ê°€ í˜¸ì¶œë˜ì–´ obj ê°ì²´ì˜ í”„ë¡œí† íƒ€ì…ì„ êµì²´
obj.__proto__ = parent;
```

#### `__proto__`ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ 

`__proto__`ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ë¹„ì •ìƒì ì¸ í”„ë¡œí† íƒ€ì… ì²´ì¸ì´ ë§Œë“¤ì–´ì§ˆ ìˆ˜ ìˆë‹¤.

```javascript
const parent = {};
const child = {};
// childì˜ í”„ë¡œí† íƒ€ì…ì„ parentë¡œ ì„¤ì •
child.__proto__ = parent;
// parentì˜ í”„ë¡œí† íƒ€ì…ì„ childë¡œ ì„¤ì •
parent.__proto__ = child; // TypeError: Cyclic __proto__ value
```

**í”„ë¡œí† íƒ€ì… ì²´ì¸ì€ Linked List êµ¬ì¡°ì´ê¸° ë•Œë¬¸ì— ìˆœí™˜ ì°¸ì¡°ê°€ ë°œìƒí•˜ë©´ ì•ˆëœë‹¤.**

ì ‘ê·¼ì í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì§ì ‘ ë³€ê²½í•˜ëŠ” ë°©ë²•ì€ ì—†ì§€ë§Œ ê·¸ë ‡ê²Œ í•˜ë©´ ì²´ì¸ì„ íƒìƒ‰í•˜ëŠ” ê³¼ì •ì—ì„œ ë¬´í•œë£¨í”„ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

<Image
  src={abnormalChainImg}
  alt="ë¹„ì •ìƒì ì¸ í”„ë¡œí† íƒ€ì… ì²´ì¸"
  widths={[640, 1280]}
  sizes="(max-width: 640px) 100vw, 640px"
  formats={["avif", "webp", "png"]}
  quality={80}
  loading="lazy"
  decoding="async"
/>

### constructor í”„ë¡œí¼í‹°

í”„ë¡œí† íƒ€ì… ê°ì²´ëŠ” constructor í”„ë¡œí¼í‹°ë¥¼ ê°–ëŠ”ë‹¤.

ì´ constructorí”„ë¡œí¼í‹°ëŠ” ê°ì²´ì˜ ì…ì¥ì—ì„œ ìì‹ ì„ ìƒì„±í•œ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.

<Image
  src={constructorPrototypeImg}
  alt="constructor í”„ë¡œí¼í‹°ì™€ prototype ê´€ê³„"
  widths={[640, 1280]}
  sizes="(max-width: 640px) 100vw, 640px"
  formats={["avif", "webp", "png"]}
  quality={80}
  loading="lazy"
  decoding="async"
/>

### Prototype Chain

ê°ì²´ì—ì„œ í”„ë¡œí¼í‹°ë‚˜ ë©”ì†Œë“œì— ì ‘ê·¼í•˜ë ¤ê³  í•  ë•Œ ìì‹ ì—ê²Œ í•´ë‹¹ ì†ì„±ì´ ì—†ìœ¼ë©´ [[Prototype]]ì´ ê°€ë¦¬í‚¤ëŠ” ë§í¬ë¥¼ ë”°ë¼ íƒìƒ‰í•œë‹¤.

1. í•´ë‹¹ ê°ì²´ ìì‹ ì˜ í”„ë¡œí¼í‹°ë¥¼ ì°¸ì¡°í•œë‹¤.
2. ì—†ë‹¤ë©´ -> [[Prototype]] ë‚´ë¶€ ìŠ¬ë¡¯ì˜ ì°¸ì¡°ë¥¼ ë”°ë¼ íƒìƒ‰í•œë‹¤.

ê³„ì† ì˜¬ë¼ê°€ë‹¤ê°€ nullì„ í”„ë¡œí† íƒ€ì…ìœ¼ë¡œ ê°€ì§€ëŠ” Objectë¥¼ ë§Œë‚˜ë©´ ê·¸ë•Œ í”„ë¡œí¼í‹° ì°¸ì¡°ë¥¼ ë©ˆì¶˜ë‹¤.
ì´ëŸ¬í•œ ê³¼ì •ì„ í”„ë¡œí† íƒ€ì… ì²´ì¸ì´ë¼ê³  í•œë‹¤.

```javascript
const early = {
  type: "Dog",
};

console.log(early.hasOwnProperty("type")); // -> true

//earlyë¼ëŠ” ê°ì²´ëŠ” hasOwnPropertyë¼ëŠ” ë©”ì†Œë“œë¥¼ ê°€ì§€ê³  ìˆì§€ ì•ŠëŠ”ë° ì •ìƒì ìœ¼ë¡œ ì¶œë ¥ë˜ì—ˆë‹¤.
//ì´ëŠ” earlyë¼ëŠ” ê°ì²´ì˜ [[Prototype]]ì´ ê°€ë¦¬í‚¤ëŠ” ë§í¬ì¸ Object.prototypeì˜ hasOwnPropertyë¥¼ í˜¸ì¶œí•˜ì˜€ê¸° ë•Œë¬¸ì´ë‹¤.
//Object.prototype.hasOwnProperty.call(early, "type")
```

javascriptì˜ Reference Typeì€ ëª¨ë‘ ìœ„ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤. (ex. Array, Set, Object, Function)
Reference Typeì€ ìœ„ì˜ í”„ë¡œí† íƒ€ì… ì²´ì¸ì„ í†µí•´ ë‚´ì¥ ë©”ì„œë“œì— ì ‘ê·¼í•œë‹¤. (ex. Array.prototype.map())

```javascript
function Person(name) {
  this.name = name;
}
// í”„ë¡œí† íƒ€ì… ë©”ì„œë“œ
Person.prototype.sayHello = function () {
  console.log(`Hi! My name is ${this.name}`);
};
const me = new Person("Lee");
// hasOwnPropertyëŠ” Object.prototypeì˜ ë©”ì„œë“œë‹¤.
console.log(me.hasOwnProperty("name")); // true
```

<Image
  src={prototypeChainImg}
  alt="constructor í”„ë¡œí¼í‹°ì™€ prototype ê´€ê³„"
  widths={[640, 1280]}
  sizes="(max-width: 640px) 100vw, 640px"
  formats={["avif", "webp", "png"]}
  quality={80}
  loading="lazy"
  decoding="async"
/>

### ê°ì²´ ë¦¬í„°ëŸ´ ë°©ì‹

javascript ì—”ì§„ì€ ê°ì²´ ë¦¬í„°ëŸ´ë¡œ ìƒì„±í•˜ëŠ” ì½”ë“œë¥¼ ë§Œë‚˜ë©´ ë‚´ë¶€ì ìœ¼ë¡œ Object.create(Object.prototype)ì™€ ìœ ì‚¬í•œ ë°©ì‹ìœ¼ë¡œ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
Object.create()ëŠ” í•¨ìˆ˜ ê°ì²´ë¡œ ì¼ë°˜ ê°ì²´ì™€ ë‹¤ë¥´ê²Œ prototype í”„ë¡œí¼í‹°ê°€ ìˆë‹¤.

ë¦¬í„°ëŸ´ í‘œí˜„ ë°©ì‹ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ê°ì²´ëŠ” ì¶”ìƒì—°ì‚°ìœ¼ë¡œ ì¸í•´ ë°˜ë“œì‹œ ê°ì²´ë¥¼ ìƒì„±í•œ ìƒì„±ì í•¨ìˆ˜ì™€ ì—°ê²°ë˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.

```javascript
// 1. Object ìƒì„±ì í•¨ìˆ˜ì— ì˜í•œ ê°ì²´ ìƒì„±
// ì¸ìˆ˜ê°€ ì „ë‹¬ë˜ì§€ ì•Šì•˜ì„ ë•Œ ì¶”ìƒ ì—°ì‚° OrdinaryObjectCreateë¥¼ í˜¸ì¶œí•˜ì—¬ ë¹ˆ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
let obj = new Object();
console.log(obj); // {}

// 2. new.targetì´ undefinedë‚˜ Objectê°€ ì•„ë‹Œ ê²½ìš°
// ì¸ìŠ¤í„´ìŠ¤ -> Foo.prototype -> Object.prototype ìˆœìœ¼ë¡œ í”„ë¡œí† íƒ€ì… ì²´ì¸ì´ ìƒì„±ëœë‹¤.
class Foo extends Object {}
new Foo(); // Foo {}

// 3. ì¸ìˆ˜ê°€ ì „ë‹¬ëœ ê²½ìš°ì—ëŠ” ì¸ìˆ˜ë¥¼ ê°ì²´ë¡œ ë³€í™˜í•œë‹¤.
// Number ê°ì²´ ìƒì„±
obj = new Object(123);
console.log(obj); // Number {123}

// String ê°ì²´ ìƒì„±
obj = new Object("123");
console.log(obj); // String {"123"}
```

ëª¨ë“  ê°ì²´ëŠ” `Object.create(null)`ì´ ì•„ë‹Œì´ìƒ ë‚´ë¶€ì ìœ¼ë¡œ ìƒì„±ì í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.

```javascript
const obj = {};
const obj2 = new Object();
// objì™€ obj2ëŠ” ë™ì¼í•œ í”„ë¡œí† íƒ€ì… ì²´ì¸ì„ ê°€ì§„ë‹¤.
```

### âš ï¸ ì£¼ì˜í•  ì 

Polyfill : ë¸Œë¼ìš°ì €ê°€ ì§€ì›í•˜ì§€ ì•ŠëŠ” ìµœì‹  ê¸°ëŠ¥ì„ ê¸°ì¡´ì˜ ë‚´ì¥ ê°ì²´ì˜ í”„ë¡œí† íƒ€ì…ì— ì¶”ê°€í•˜ëŠ” ì½”ë“œ

```javascript
if (!Array.prototype.includes) {
  Array.prototype.includes = function (value) {
    return this.indexOf(value) !== -1;
  };
}
```

Ponyfill : Polyfillê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ ë‚´ì¥ ê°ì²´ë¥¼ ì§ì ‘ ìˆ˜ì •í•˜ì§€ ì•Šê³  ë…ë¦½ì ì¸ í•¨ìˆ˜ë¡œ ì œê³µí•˜ëŠ” ë°©ë²•

```javascript
function includes(array, value) {
  return array.indexOf(value) !== -1;
}

includes([1, 2, 3], 2); // true
```

ìœ„ì˜ ë‘ê°€ì§€ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ì•„ë‹ˆë¼ë©´ ë„¤ì´í‹°ë¸Œ í”„ë¡œí† íƒ€ì…ì„ í™•ì¥í•˜ë©´ ìº¡ìŠí™”ë¥¼ ë§ì¹œë‹¤.
(Monkey Patching: ê¸°ì¡´ì˜ ê°ì²´ë‚˜ í•¨ìˆ˜ì˜ ë™ì‘ì„ ëŸ°íƒ€ì„ì— ì§ì ‘ ìˆ˜ì •í•˜ê±°ë‚˜ ë®ì–´ì“°ëŠ” ê²ƒ)
