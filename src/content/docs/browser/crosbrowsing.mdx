---
layout: ../../../layouts/BlogPost.astro
title: crosbrowsing
---

import { Image } from "astro:assets";
import renderImg from "../../../assets/images/crossbrowsing/render.png";
import renderingEngineImg from "../../../assets/images/crossbrowsing/renderingEngine.png";
import renderingImg from "../../../assets/images/crossbrowsing/rendering.png";
import parseImg from "../../../assets/images/crossbrowsing/parse.png";

웹 호환성과 웹 표준에 대해서 공부하다가  
웹 호환성 테스트를 위해 크로스 브라우징 테스트라는게 있는지 알았고  
Babel과 polyfill로 구현한다는 것을 알았다.

이후에 브라우저가 어떻게 동작하길래 이런 호환성을 맞추는 과정이 필요한지 궁금해서  
렌더링 엔진 및 브라우저 엔진에 대해 살펴보게 되었다.

### 크로스 브라우징이란?

웹 호환성을 구현하기 위한 기술이다.

호환성을 확인하기 위해서는 https://caniuse.com/ 에서 확인해볼 수 있다.

_여담인데 MS가 IE11보다 오래된 IE는 지원을 중지했고 사용해도 Edge로 사용을 전환할것을 요구한다고 한다._

### 렌더링 엔진이란?

화면에 text와 image를 그리는 software이다.  
HTML,XML,CSS 등 소스 코드를 호출시에 읽고 해석하는 인터프리터이다.

렌더링 엔진은 그릴 때 웹 표준에 따라 보안정책을 강제하며 script에 노출되는 DOM 자료구조를 구현한다.

여기서 보안정책은 사이트 간 스크립팅(XSS), 클릭재킹, 코드 인젝션을 방지한 컴퓨터 보안수준이다.  
이는 W3C에서 규정하고 있다.

#### 렌더링 엔진 동작 과정

URL을 입력하면 8KB 단위로 문서의 내용이 전달된다.
이후 아래의 단계로 작업이 진행된다.

1. DOM 트리 구축을 위한 HTML 파싱
2. 렌더 트리 구축
3. 렌더 트리 배치
4. 렌더 트리 그리기

<Image
  src={renderImg}
  alt="렌더링 엔진 동작 과정"
  widths={[640, 1280]}
  sizes="(max-width: 640px) 100vw, 640px"
  formats={["avif", "webp", "png"]}
  quality={80}
  loading="lazy"
  decoding="async"
/>

여기서 렌더링 엔진은 모든 HTML을 파싱(분석)할 때까지 기다리지 않고 배치와 그리기 과정을 반복한다.  
즉, 모든 내용을 받기 전 일부 내용을 화면에 표시한다.

#### 렌더링 엔진의 종류

<Image
  src={renderingEngineImg}
  alt="렌더링 엔진의 종류"
  widths={[640, 1280]}
  sizes="(max-width: 640px) 100vw, 640px"
  formats={["avif", "webp", "png"]}
  quality={80}
  loading="lazy"
  decoding="async"
/>

이중에서 Webkit과 Gecko의 동작 과정은 아래와 같다.

<Image
  src={renderingImg}
  alt="Webkit과 Gecko의 동작 과정"
  widths={[640, 1280]}
  sizes="(max-width: 640px) 100vw, 640px"
  formats={["avif", "webp", "png"]}
  quality={80}
  loading="lazy"
  decoding="async"
/>

DOM 구축과 렌더트리를 그리는 과정을 더 자세히 볼 수 있다.

파싱이라는 말이 자주 나오는데  
파싱도 공부하면 엄청 심오하다.

**파싱은 구문석이다.**

즉, 문서 파싱은 렌더링 측면에서 브라우저가 코드를 이해하고 사용할 수 있는 구조로 만드는 것을 의미한다.  
크게 두가지로 나눌 수 있다.

1. 어휘 분석
2. 구문 분석

**어휘분석**

자료를 토큰으로 분해한 것이다.  
토근은 공백과 줄바꿈 같은 의미 없는 문자를 제거한 유효하게 구성된 단위의 집합체이다.  
예를 들면 용어집이라고 생각할 수 있다.

**구문 분석**

언어의 구문 규칙을 적용하는 과정이다.

파싱 과정을 아래와 같이 설명할 수 있다.

<Image
  src={parseImg}
  alt="파싱 과정"
  widths={[640, 1280]}
  sizes="(max-width: 640px) 100vw, 640px"
  formats={["avif", "webp", "png"]}
  quality={80}
  loading="lazy"
  decoding="async"
/>

파싱 트리를 만들고 컴파일러가 기계 코드 문서로 변환하는 과정을 거친다.  
이 과정에서 **문맥 자유 문법**을 사용한다.

_문맥 자유 문법은 컴파일러 설계나 자연어 처리할 때 언어의 구문을 기술하는데 활용되는 문법이다._

간단히 파싱이 뭔지 알았으니  
이렇게 파싱이 트리를 구성하고 DOM 트리나 콘텐츠 모델이 완성되는 과정을 더 자세히 이해했을 것이다.

---

네이버 Dev 문서를 적극 차용해서 작성된 글이다.  
파싱에 대한 내용이 많아서 그 부분은 따로 포스팅을 작성하려고 한다.  
오늘 포스팅을 위해 문서와 다양한 참고 자료를 3일동안 중간 중간 몇번이나 읽어보고 그곳의 이미지를 차용해 내가 이해한 내용을 붙여서 작성하였다.
https://d2.naver.com/helloworld/59361
