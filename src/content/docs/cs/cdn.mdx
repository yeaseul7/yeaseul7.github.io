---
layout: ../../../layouts/BlogPost.astro
title: CDN
---

### CDN이란?

CDN은 Content Delivery Network의 약자이다.
웹 사이트에 접속할 경우 인터넷을 통해 사이트의 데이터가 사용자 컴퓨터로 이동하는데
이 시간을 단축시키기 위해 CDN이 존재한다.
따라서 CDN은 웹 페이지 로드 속도를 높이는 콘텐츠 전송 네트워크이다.

웹사이트를 접속할 때 우리가 눈으로 보는 데이터들은 물리적으로 매우 먼 거리를 이동한다.
이를 위해 CDN이 필요한데, CDN은 클라이언트와 웹사이트 서버 사이에 중간 서버를 둔다.
이렇게 CDN 서버가 클라이언트(사용자 컴퓨터)와 서버(데이터가 존재하는)사이를 관리하며 트래픽을 줄이고, 대역폭 소비를 줄이면서 사용자 환경을 개선한다.

### CDN이 전송하는 콘텐츠

두가지 유형이 존재한다.

1. **정적 콘텐츠**
   이 콘텐츠는 사이트에서 주로 바뀌지 않는 부분이다.
   mdn으로 예시를 들면 헤더 이미지, 로고, 배너가 된다. 이는 바뀌지 않는 값으로 수정할 필요가 없기 때문에 CDN에 저장하는게 이상적이다.
2. **동적 콘텐츠**
   날씨, 로그인 상태 같이 자주 바뀔 수 있는 부분이다.
   또한 사용자별로 다르게 나타나야 하는 부분일 수 있다. 이것도 CDN을 통해 전송할 수 있는 콘텐츠 중에 하나다.

### CDN 동작 원리

CDN은 POP(여러 지리적 위치에 접속 지점) 또는 CDN 엣지 서버 그룹을 설정하는 방식으로 작동된다. 지리적으로 분산된 이 네트워크는 캐싱, 동적 가속 및 엣지 로직 계산의 원리를 기반으로 작동한다.
위의 말만 봐서는 감이 잘 안온다.

**먼저 CDN이 캐싱으로 작동한다고 했는데 무슨 의미일까?**
먼저 컴퓨터에서 말하는 캐싱이 무엇인지 이해할 필요가 있다.
컴퓨터에서 말하는 캐싱은 복사본은 저장하는 과정이라고 이해하면 된다.

한국에서 중국에 서버가 존재하는 사이트에 방문할 때
한국에서 사용자가 이용하는 컴퓨터와 중국에 있는 서버와 통신이 필요하다는 가정을 두자.

사용자의 컴퓨터를 Client라고 칭하겠다.
중국에 있는 서버를 Origin Server라고 칭하겠다.

1. Client는 중국 서버에 먼저 콘텐츠(정적, 동적)를 요청한다.
2. 해당 요청은 Origin Server에 도달한다.
3. Origin Server는 Client에게 응답을 보내면서 Client와 지리적으로 가까운 CDN POP에 응답하는 내용의 복사본을 보낸다.
4. CDN POP은 복사본을 캐싱된 파일로 **저장**한다.
5. 이후에 Client가 같은 요청을 보내면 Origin Server까지 가지 않고 CDN POP의 캐싱된 서버에서 응답을 보낸다.

위의 경우에는 정적 콘텐츠를 주고 받을 경우 유용할 것이다.

**CDN이 동적 가속을 이용하는 것은 무슨 의미일까?**

이는 CDN과 Origin Server의 연결의 최적화 해서 캐싱을 이용하기 어려운 동적 콘텐츠를 전달할 때 응답 시간을 단축시키는 것이다.

만약 Client가 직접 Origin Server에 동적 요청을 보내는 경우 네트워크 지연 시간으로 요청이 제대로 가지 않거나 보안 검증 절차에 따라 오래걸릴 수 있다. 하지만 근처 CDN을 이용하면 보안 설정이 이미 되어있거나 지속적인 연결이 원활하게 될 수 있도록 설정되어있을 것이다.
따라서 해당 시간을 단축시킬 수 있다.

이는 **지능형 라우팅 알고리즘**을 사용하는데 이에 관해서는 이후에 포스팅 하겠다.

**마지막으로 CDN 엣지 로직 계산은 무슨 의미일까?**

클라이언트와 서버 간의 통신을 단순화하는 논리적 계산을 수행하도록 CDN 엣지 서버를 프로그래밍할 수 있다.
예를 들면

1. 사용자 요청을 검사하고 캐싱을 수정한다. (요청에 따라서 캐싱의 방식 결정)
2. 잘못된 사용자 요청을 처리
3. 응답하기 전에 콘텐츠 최적화

## CDN의 예시

- Amazon CloudFront
- Azure Front Door

내가 아는 예시는 여기까지 이다.
CDN을 사용하면 Ddos 공격으로 부터도 어느정도 보호될 수 있다.
